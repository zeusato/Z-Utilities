import{r as o,j as e}from"./index-DKdO3KDO.js";import"./_commonjsHelpers-Cpj98o6Y.js";const j="rounded-2xl border border-zinc-200/80 bg-white/70 shadow-sm backdrop-blur dark:bg-zinc-900/60 dark:border-zinc-700",B=n=>(n/1024).toFixed(1);function W(n){return/^data:([^;]+);base64,/.exec(n)?.[1]}function $(n){return new Promise((c,g)=>{const d=new FileReader;d.onload=r=>c(String(r.target?.result||"")),d.onerror=g,d.readAsDataURL(n)})}async function S(n,c){return new Promise((g,d)=>{const r=new Image;r.onload=()=>{let x=r.naturalWidth,h=r.naturalHeight;if(c.resize){const i=Number(c.W)||0,l=Number(c.H)||0;i&&!l?(h=Math.round(r.naturalHeight*i/r.naturalWidth),x=i):l&&!i?(x=Math.round(r.naturalWidth*l/r.naturalHeight),h=l):i&&l&&(x=i,h=l)}const s=document.createElement("canvas");s.width=Math.max(1,Math.floor(x)),s.height=Math.max(1,Math.floor(h)),s.getContext("2d").drawImage(r,0,0,s.width,s.height);const b=Math.min(1,Math.max(.01,c.quality??.92)),u=c.forceType||W(n)||"image/png";try{g(s.toDataURL(u,b))}catch(i){d(i)}},r.onerror=d,r.src=n})}function P(){const[n,c]=o.useState([]),[g,d]=o.useState(!1),r=o.useRef(null),[x,h]=o.useState(""),[s,f]=o.useState(!1),[b,u]=o.useState(""),[i,l]=o.useState(""),[v,y]=o.useState(92),k=()=>r.current?.click(),N=o.useCallback(async t=>{if(!t)return;const p=Array.from(t).filter(a=>a.type.startsWith("image/")),m=[];for(const a of p){const H=await $(a),D=await S(H,{forceType:x||void 0,resize:s,W:Number(b)||void 0,H:Number(i)||void 0,quality:v/100});m.push({id:`${Date.now()}-${Math.random()}`,name:a.name,fileKB:B(a.size),dataUrl:D})}c(a=>[...a,...m])},[x,s,b,i,v]),C=t=>{t.preventDefault(),d(!1),N(t.dataTransfer.files)},M=t=>{t.preventDefault(),d(!0)},L=t=>{t.preventDefault(),d(!1)},w=()=>c([]),R=()=>{w(),h(""),f(!1),u(""),l(""),y(92)},z=o.useMemo(()=>n.map(t=>`<img src="${t.dataUrl}" alt="${t.name.replace(/"/g,"&quot;")}" />`).join(`
`),[n]),T=async()=>{try{await navigator.clipboard.writeText(z)}catch{}},U=()=>{const t=`<!doctype html><html><head><meta charset="utf-8"><title>Base64 Images</title></head><body>
${z}
</body></html>`,p=new Blob([t],{type:"text/html"}),m=URL.createObjectURL(p),a=document.createElement("a");a.href=m,a.download="base64-images.html",a.click(),URL.revokeObjectURL(m)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[0.5fr_2fr] gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:`${j} p-4`,children:e.jsxs("div",{className:"flex flex-wrap justify-start items-center gap-2",children:[e.jsx("button",{onClick:k,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",children:"Ch·ªçn ·∫£nh"}),e.jsxs("select",{value:x,onChange:t=>h(t.target.value),className:"rounded-lg border border-zinc-300 bg-white/70 px-3 py-2 text-sm dark:bg-zinc-900/60 dark:border-zinc-700",title:"ƒê·ªãnh d·∫°ng xu·∫•t",children:[e.jsx("option",{value:"",children:"Gi·ªØ ƒë·ªãnh d·∫°ng g·ªëc"}),e.jsx("option",{value:"image/png",children:"√âp PNG"}),e.jsx("option",{value:"image/jpeg",children:"√âp JPEG"}),e.jsx("option",{value:"image/webp",children:"√âp WEBP"})]}),e.jsxs("div",{className:"flex items-center justify-start gap-2 text-xs opacity-80",children:[e.jsx("span",{children:"Quality"}),e.jsx("input",{type:"number",min:1,max:100,value:v,onChange:t=>y(Math.max(1,Math.min(100,Number(t.target.value)||92))),className:"w-[88px] rounded-lg border border-zinc-300 bg-white/70 px-2 py-1.5 text-xs dark:bg-zinc-900/60 dark:border-zinc-700",title:"JPEG/WEBP quality"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[e.jsxs("label",{className:"ml-1 flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"accent-indigo-600",checked:s,onChange:t=>f(t.target.checked)}),"Resize"]}),e.jsx("input",{type:"number",placeholder:"Width px",value:b,onChange:t=>u(t.target.value),disabled:!s,className:"w-[120px] rounded-lg border border-zinc-300 bg-white/70 px-3 py-2 text-sm disabled:opacity-50 dark:bg-zinc-900/60 dark:border-zinc-700"}),e.jsx("input",{type:"number",placeholder:"Height px",value:i,onChange:t=>l(t.target.value),disabled:!s,className:"w-[120px] rounded-lg border border-zinc-300 bg-white/70 px-3 py-2 text-sm disabled:opacity-50 dark:bg-zinc-900/60 dark:border-zinc-700"})]})]})}),e.jsxs("div",{className:`${j} ${g?"border-indigo-400 bg-indigo-50/60":"border-dashed"} p-6 text-center text-zinc-600 dark:text-zinc-300 cursor-pointer`,onClick:k,onDragOver:M,onDragLeave:L,onDrop:C,children:[e.jsx("div",{className:"text-4xl",children:"üñºÔ∏è"}),e.jsx("div",{className:"mt-1 text-sm opacity-80",children:"K√©o & th·∫£ ·∫£nh v√†o ƒë√¢y (ho·∫∑c b·∫•m ‚ÄúCh·ªçn ·∫£nh‚Äù)."}),e.jsx("input",{ref:r,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:t=>N(t.target.files)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"rounded-lg border border-zinc-300 px-3 py-1.5 text-sm hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",children:"Xo√° danh s√°ch"}),e.jsx("button",{onClick:R,className:"rounded-lg border border-zinc-300 px-3 py-1.5 text-sm hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",children:"Reset all"})]})]}),e.jsx("div",{className:`${j} p-4`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_1fr] gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Danh s√°ch k·∫øt qu·∫£"}),e.jsxs("div",{className:"grid gap-3",children:[n.map((t,p)=>{const m=Math.ceil(t.dataUrl.length*3/4/1024),a=`<img src="${t.dataUrl}" alt="${t.name.replace(/"/g,"&quot;")}" />`;return e.jsxs("div",{className:"grid grid-cols-[140px_1fr] gap-3 items-start rounded-xl border border-zinc-200 p-2 dark:border-zinc-700",children:[e.jsx("img",{src:t.dataUrl,className:"h-[140px] w-[140px] rounded-md object-cover bg-zinc-100",alt:"thumb"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2 justify-between text-xs text-green-400",children:[e.jsxs("div",{children:[t.name," ¬∑ ",t.fileKB," KB ‚Üí ",m.toLocaleString()," KB"]}),e.jsxs("div",{className:"flex gap-2 text-white",children:[e.jsxs("button",{onClick:async()=>{await navigator.clipboard.writeText(a)},className:"rounded-md border border-zinc-300 px-2 py-1 text-xs hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",children:["Copy ",e.jsx("code",{children:"<img>"})]}),e.jsx("button",{onClick:async()=>{await navigator.clipboard.writeText(t.dataUrl)},className:"rounded-md border border-zinc-300 px-2 py-1 text-xs hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",children:"Copy data URL"})]})]}),e.jsx("textarea",{className:"w-full min-h-[110px] resize-vertical rounded-lg border border-zinc-300 bg-zinc-50 p-2 font-mono text-xs text-black dark:bg-zinc-900 dark:text-white dark:border-zinc-700",spellCheck:!1,value:a,readOnly:!0})]})]},t.id)}),!n.length&&e.jsx("div",{className:"rounded-lg border border-dashed border-zinc-300 p-6 text-center text-sm text-zinc-500 dark:border-zinc-700",children:"Ch∆∞a c√≥ ·∫£nh n√†o. H√£y t·∫£i ·∫£nh ·ªü khung b√™n tr√°i."})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-3 text-sm font-semibold",children:"G·ªôp t·∫•t c·∫£ (HTML snippet)"}),e.jsx("textarea",{className:"h-[260px] w-full resize-vertical rounded-lg border border-zinc-300 bg-zinc-50 p-2 font-mono text-xs text-black dark:bg-zinc-900 dark:text-white dark:border-zinc-700",value:z,readOnly:!0}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:T,className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-indigo-700",children:"Copy t·∫•t c·∫£"}),e.jsx("button",{onClick:U,className:"rounded-lg border border-zinc-300 px-3 py-1.5 text-sm hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",children:"T·∫£i .html"})]}),e.jsx("p",{className:"mt-3 text-xs text-zinc-500",children:"M·∫πo: Base64 l√†m HTML n·∫∑ng, n√™n ch·ªâ d√πng cho logo/icon/gif nh·ªè, email template, ho·∫∑c khi c·∫ßn 1 file duy nh·∫•t."})]})]})})]})})}export{P as default};
